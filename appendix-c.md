# é™„å½• Cï¼šæ•…éšœæ’æŸ¥æŒ‡å—

æœ¬æŒ‡å—å¸®åŠ©æ‚¨è¯Šæ–­å’Œè§£å†³ä½¿ç”¨ Gemini CLI æ—¶å¯èƒ½é‡åˆ°çš„å¸¸è§é—®é¢˜ã€‚

## ç›®å½•

1. [å¿«é€Ÿè¯Šæ–­æµç¨‹](#å¿«é€Ÿè¯Šæ–­æµç¨‹)
2. [è®¤è¯ä¸é…ç½®é—®é¢˜](#è®¤è¯ä¸é…ç½®é—®é¢˜)
3. [API ä¸ç½‘ç»œé”™è¯¯](#api-ä¸ç½‘ç»œé”™è¯¯)
4. [å·¥å…·æ‰§è¡Œé”™è¯¯](#å·¥å…·æ‰§è¡Œé”™è¯¯)
5. [MCP é›†æˆé—®é¢˜](#mcp-é›†æˆé—®é¢˜)
6. [æ€§èƒ½ä¸èµ„æºé—®é¢˜](#æ€§èƒ½ä¸èµ„æºé—®é¢˜)
7. [è°ƒè¯•æŠ€å·§](#è°ƒè¯•æŠ€å·§)
8. [é”™è¯¯æ¢å¤æœºåˆ¶](#é”™è¯¯æ¢å¤æœºåˆ¶)
9. [å¸¸è§é”™è¯¯é€ŸæŸ¥è¡¨](#å¸¸è§é”™è¯¯é€ŸæŸ¥è¡¨)

## å¿«é€Ÿè¯Šæ–­æµç¨‹

å½“é‡åˆ°é—®é¢˜æ—¶ï¼ŒæŒ‰ä»¥ä¸‹æ­¥éª¤å¿«é€Ÿå®šä½ï¼š

### 1. æ£€æŸ¥åŸºç¡€ç¯å¢ƒ

```bash
# æ£€æŸ¥ Node.js ç‰ˆæœ¬ï¼ˆéœ€è¦ 18+ï¼‰
node --version

# æ£€æŸ¥ Gemini CLI ç‰ˆæœ¬
gemini --version

# éªŒè¯è®¤è¯çŠ¶æ€
gemini
# ç„¶åè¾“å…¥ /auth æŸ¥çœ‹å½“å‰è®¤è¯æ–¹å¼
```

### 2. æŸ¥çœ‹é”™è¯¯æ—¥å¿—

Gemini CLI ä¼šåœ¨ä¸´æ—¶ç›®å½•ç”Ÿæˆè¯¦ç»†çš„é”™è¯¯æŠ¥å‘Šï¼š

```bash
# macOS/Linux
ls /tmp/gemini-client-error-*.json

# Windows
dir %TEMP%\gemini-client-error-*.json
```

é”™è¯¯æŠ¥å‘Šæ–‡ä»¶åæ ¼å¼ï¼š`gemini-client-error-{type}-{timestamp}.json`

### 3. å¯ç”¨è°ƒè¯•æ¨¡å¼

é€šè¿‡ç¯å¢ƒå˜é‡å¯ç”¨è¯¦ç»†æ—¥å¿—ï¼š

```bash
# ä½¿ç”¨ DEBUG ç¯å¢ƒå˜é‡
DEBUG=true gemini

# æˆ–ä½¿ç”¨ DEBUG_MODE
export DEBUG_MODE=1
gemini

# æŒ‡å®šè°ƒè¯•ç«¯å£ï¼ˆç”¨äº Node.js è°ƒè¯•ï¼‰
DEBUG=true DEBUG_PORT=9229 gemini
```

### 4. æ£€æŸ¥ä¼šè¯æ—¥å¿—

ä¼šè¯æ—¥å¿—å­˜å‚¨åœ¨é¡¹ç›®çš„ `.gemini` ç›®å½•ï¼š

```bash
# æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶
cat .gemini/logs.json

# æŸ¥çœ‹æ£€æŸ¥ç‚¹
ls .gemini/checkpoint-*.json
```

## è®¤è¯ä¸é…ç½®é—®é¢˜

### è®¤è¯æ–¹å¼æ£€æŸ¥

Gemini CLI æ”¯æŒå¤šç§è®¤è¯æ–¹å¼ï¼Œæ¯ç§éƒ½æœ‰ç‰¹å®šçš„é…ç½®è¦æ±‚ï¼š

#### 1. Google è´¦å·ç™»å½•ï¼ˆæ¨èï¼‰

```bash
# ä½¿ç”¨ /auth å‘½ä»¤é€‰æ‹© "Login with Google"
gemini
> /auth
```

**å¸¸è§é—®é¢˜ï¼š**
- **403 Forbidden**: é¡¹ç›®æœªå¯ç”¨ Gemini Code Assist
  - è§£å†³ï¼šè®¿é—® https://goo.gle/set-up-gemini-code-assist å¯ç”¨æœåŠ¡
- **401 Unauthorized**: è®¤è¯ä»¤ç‰Œè¿‡æœŸ
  - è§£å†³ï¼šé‡æ–°è¿è¡Œ `/auth` è¿›è¡Œç™»å½•

#### 2. Gemini API Key

éœ€è¦è®¾ç½®ç¯å¢ƒå˜é‡ï¼š

```bash
export GEMINI_API_KEY="your-api-key"
gemini
```

**å¸¸è§é—®é¢˜ï¼š**
- **"GEMINI_API_KEY environment variable not found"**
  - è§£å†³ï¼šç¡®ä¿è®¾ç½®äº† GEMINI_API_KEY ç¯å¢ƒå˜é‡
  - å¯ä»¥ä½¿ç”¨ `.env` æ–‡ä»¶ï¼ˆè‡ªåŠ¨åŠ è½½ï¼‰

#### 3. Vertex AI

éœ€è¦ä»¥ä¸‹é…ç½®ä¹‹ä¸€ï¼š

```bash
# é€‰é¡¹ 1ï¼šé¡¹ç›®å’Œä½ç½®
export GOOGLE_CLOUD_PROJECT="your-project-id"
export GOOGLE_CLOUD_LOCATION="us-central1"

# é€‰é¡¹ 2ï¼šExpress æ¨¡å¼
export GOOGLE_API_KEY="your-api-key"
```

**å¸¸è§é—®é¢˜ï¼š**
- **ç¼ºå°‘å¿…éœ€çš„ç¯å¢ƒå˜é‡**
  - é”™è¯¯ä¿¡æ¯ä¼šæ˜ç¡®æŒ‡å‡ºéœ€è¦å“ªäº›å˜é‡

### é…ç½®æ–‡ä»¶ä½ç½®

é…ç½®æ–‡ä»¶æŒ‰ä»¥ä¸‹ä¼˜å…ˆçº§åŠ è½½ï¼š

1. é¡¹ç›®çº§ï¼š`.gemini/settings.json`
2. ç”¨æˆ·çº§ï¼š`~/.config/gemini/settings.json`
3. å…¨å±€çº§ï¼š`/etc/gemini/settings.json`ï¼ˆUnixï¼‰æˆ– `%PROGRAMDATA%\gemini\settings.json`ï¼ˆWindowsï¼‰

### ç¯å¢ƒå˜é‡ä¼˜å…ˆçº§

ç¯å¢ƒå˜é‡ä¼šè¦†ç›–é…ç½®æ–‡ä»¶ä¸­çš„è®¾ç½®ï¼š

```bash
# ä¸´æ—¶è¦†ç›–æ¨¡å‹è®¾ç½®
GEMINI_MODEL="gemini-2.0-flash-thinking-exp-1219" gemini
```

## API ä¸ç½‘ç»œé”™è¯¯

### é…é¢é”™è¯¯å¤„ç†

#### 1. Pro æ¨¡å‹é…é¢è¶…é™

**é”™è¯¯ä¿¡æ¯ï¼š** `Quota exceeded for quota metric 'Gemini 2.5 Pro Requests'`

**è‡ªåŠ¨å¤„ç†ï¼š**
- OAuth ç”¨æˆ·ï¼šè‡ªåŠ¨åˆ‡æ¢åˆ° Flash æ¨¡å‹
- API Key ç”¨æˆ·ï¼šéœ€è¦æ‰‹åŠ¨å¤„ç†

**è§£å†³æ–¹æ¡ˆï¼š**
- å…è´¹ç”¨æˆ·ï¼šå‡çº§åˆ° Gemini Code Assist Standard/Enterprise
- ä»˜è´¹ç”¨æˆ·ï¼šä½¿ç”¨ `/auth` åˆ‡æ¢åˆ° AI Studio API Key
- ç­‰å¾…é…é¢é‡ç½®ï¼ˆé€šå¸¸ä¸ºæ¯æ—¥é‡ç½®ï¼‰

#### 2. é€Ÿç‡é™åˆ¶ï¼ˆ429 é”™è¯¯ï¼‰

**è‡ªåŠ¨é‡è¯•æœºåˆ¶ï¼š**
- é»˜è®¤ 5 æ¬¡é‡è¯•
- æŒ‡æ•°é€€é¿ï¼š5-30 ç§’å»¶è¿Ÿ
- æ”¯æŒ Retry-After å“åº”å¤´

**æ‰‹åŠ¨å¤„ç†ï¼š**
```bash
# åˆ‡æ¢åˆ°å¤‡ç”¨æ¨¡å‹
GEMINI_MODEL="gemini-2.0-flash-exp-0111" gemini

# æˆ–åœ¨ä¼šè¯ä¸­ä½¿ç”¨ /model å‘½ä»¤
> /model gemini-2.0-flash-exp-0111
```

### ç½‘ç»œè¿æ¥é—®é¢˜

#### 1. ä»£ç†é…ç½®

æ”¯æŒæ ‡å‡†ç¯å¢ƒå˜é‡ï¼š

```bash
# HTTP ä»£ç†
export HTTP_PROXY="http://proxy.company.com:8080"
export HTTPS_PROXY="http://proxy.company.com:8080"

# ä¸ä½¿ç”¨ä»£ç†çš„åœ°å€
export NO_PROXY="localhost,127.0.0.1"
```

#### 2. è¶…æ—¶é”™è¯¯

**é»˜è®¤è¶…æ—¶ï¼š**
- API è¯·æ±‚ï¼šæ ¹æ® Retry-After å¤´åŠ¨æ€è°ƒæ•´
- MCP å·¥å…·ï¼š10 åˆ†é’Ÿ

**è‡ªå®šä¹‰è¶…æ—¶ï¼š**
```json
// .gemini/settings.json
{
  "requestTimeoutMs": 120000  // 2 åˆ†é’Ÿ
}
```

### æœåŠ¡å™¨é”™è¯¯ï¼ˆ5xxï¼‰

**è‡ªåŠ¨å¤„ç†ï¼š**
- è‡ªåŠ¨é‡è¯•ï¼ˆæœ€å¤š 5 æ¬¡ï¼‰
- è®°å½•è¯¦ç»†é”™è¯¯æ—¥å¿—

**è¯Šæ–­æ­¥éª¤ï¼š**
1. æ£€æŸ¥ Google æœåŠ¡çŠ¶æ€é¡µé¢
2. æŸ¥çœ‹é”™è¯¯æŠ¥å‘Šæ–‡ä»¶
3. å°è¯•åˆ‡æ¢è®¤è¯æ–¹å¼æˆ–åŒºåŸŸ

## å·¥å…·æ‰§è¡Œé”™è¯¯

### Shell å‘½ä»¤æ‰§è¡Œé—®é¢˜

#### 1. å‘½ä»¤éªŒè¯å¤±è´¥

**å¸¸è§é”™è¯¯ï¼š**
- **"Command cannot be empty"**: ç©ºå‘½ä»¤
- **"Directory cannot be absolute"**: ä½¿ç”¨äº†ç»å¯¹è·¯å¾„
- **"Directory must exist"**: æŒ‡å®šçš„ç›®å½•ä¸å­˜åœ¨
- **"Could not identify command root"**: æ— æ³•è¯†åˆ«å‘½ä»¤

**è§£å†³æ–¹æ¡ˆï¼š**
```bash
# æ­£ç¡®ï¼šä½¿ç”¨ç›¸å¯¹è·¯å¾„
> Run: cd src && npm test

# é”™è¯¯ï¼šä½¿ç”¨ç»å¯¹è·¯å¾„
> Run: cd /Users/name/project/src  # ä¼šè¢«æ‹’ç»
```

#### 2. æƒé™ç¡®è®¤

é¦–æ¬¡æ‰§è¡Œå‘½ä»¤éœ€è¦ç”¨æˆ·ç¡®è®¤ï¼š
- **Y**: å…è®¸æœ¬æ¬¡æ‰§è¡Œ
- **A**: å§‹ç»ˆå…è®¸è¯¥å‘½ä»¤
- **N**: æ‹’ç»æ‰§è¡Œ

### æ–‡ä»¶æ“ä½œé”™è¯¯

#### 1. å¸¸è§æ–‡ä»¶ç³»ç»Ÿé”™è¯¯

- **ENOENT**: æ–‡ä»¶ä¸å­˜åœ¨
  ```bash
  # è§£å†³ï¼šå…ˆæ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨
  > List files in src/
  ```

- **EACCES**: æƒé™ä¸è¶³
  ```bash
  # è§£å†³ï¼šæ£€æŸ¥æ–‡ä»¶æƒé™
  ls -la problematic-file.txt
  ```

- **ETIMEDOUT**: æ“ä½œè¶…æ—¶
  - é€šå¸¸å‘ç”Ÿåœ¨å¤„ç†å¤§æ–‡ä»¶æ—¶
  - è€ƒè™‘åˆ†æ‰¹å¤„ç†

#### 2. ç¼–è¾‘å†²çª

å½“ç¼–è¾‘çš„å†…å®¹ä¸æ–‡ä»¶å®é™…å†…å®¹ä¸åŒ¹é…æ—¶ï¼š

```
Error: The content to be replaced was not found in the file
```

**è§£å†³æ­¥éª¤ï¼š**
1. ä½¿ç”¨ `read_file` æŸ¥çœ‹å½“å‰å†…å®¹
2. ç¡®ä¿ç¼–è¾‘æ—¶åŒ…å«è¶³å¤Ÿçš„ä¸Šä¸‹æ–‡
3. æ³¨æ„ä¿ç•™åŸå§‹çš„ç¼©è¿›å’Œç©ºç™½å­—ç¬¦

### å·¥å…·å¹¶å‘æ‰§è¡Œ

å¤šä¸ªå·¥å…·å¯èƒ½å¹¶è¡Œæ‰§è¡Œï¼Œæ³¨æ„ï¼š

1. **æ–‡ä»¶é”å®š**ï¼šåŒæ—¶ç¼–è¾‘åŒä¸€æ–‡ä»¶å¯èƒ½å¤±è´¥
2. **ä¾èµ–é¡ºåº**ï¼šç¡®ä¿æœ‰ä¾èµ–å…³ç³»çš„æ“ä½œæŒ‰é¡ºåºæ‰§è¡Œ
3. **èµ„æºç«äº‰**ï¼šé¿å…åŒæ—¶æ‰§è¡Œèµ„æºå¯†é›†å‹æ“ä½œ

## MCP é›†æˆé—®é¢˜

### MCP æœåŠ¡å™¨è¿æ¥çŠ¶æ€

ä½¿ç”¨ `/mcp` å‘½ä»¤æŸ¥çœ‹æ‰€æœ‰ MCP æœåŠ¡å™¨çŠ¶æ€ï¼š

```bash
> /mcp
```

**çŠ¶æ€è¯´æ˜ï¼š**
- ğŸŸ¢ **CONNECTED**: æ­£å¸¸è¿æ¥
- ğŸŸ¡ **CONNECTING**: è¿æ¥ä¸­
- ğŸ”´ **DISCONNECTED**: æ–­å¼€æˆ–é”™è¯¯

### å¸¸è§ MCP é”™è¯¯

#### 1. æœåŠ¡å™¨å¯åŠ¨å¤±è´¥

**é”™è¯¯ï¼š** `Failed to start MCP server`

**æ’æŸ¥æ­¥éª¤ï¼š**
```bash
# 1. éªŒè¯æœåŠ¡å™¨é…ç½®
cat ~/.config/gemini/settings.json | grep mcp

# 2. æµ‹è¯•æœåŠ¡å™¨å¯æ‰§è¡Œæ€§
which your-mcp-server

# 3. æ£€æŸ¥æƒé™
ls -la $(which your-mcp-server)
```

#### 2. OAuth è®¤è¯è¦æ±‚

æŸäº› MCP æœåŠ¡å™¨éœ€è¦ OAuth è®¤è¯ï¼š

**é”™è¯¯ï¼š** `WWW-Authenticate: Bearer realm="..."` 

**è§£å†³æ–¹æ¡ˆï¼š**
1. æŒ‰æç¤ºè®¿é—®è®¤è¯ URL
2. å®Œæˆ OAuth æµç¨‹
3. ä»¤ç‰Œä¼šè‡ªåŠ¨ä¿å­˜

#### 3. å·¥å…·å‘ç°è¶…æ—¶

**é»˜è®¤è¶…æ—¶ï¼š** 10 åˆ†é’Ÿ

**è‡ªå®šä¹‰é…ç½®ï¼š**
```json
// settings.json
{
  "mcpServers": {
    "slow-server": {
      "command": "slow-mcp-server",
      "timeout": 600000  // 10 åˆ†é’Ÿ
    }
  }
}
```

### MCP è°ƒè¯•æŠ€å·§

1. **æŸ¥çœ‹æœåŠ¡å™¨æ—¥å¿—**
   ```bash
   # å¯ç”¨ MCP è°ƒè¯•æ—¥å¿—
   MCP_DEBUG=1 gemini
   ```

2. **éš”ç¦»æµ‹è¯•**
   ```bash
   # ç›´æ¥è¿è¡Œ MCP æœåŠ¡å™¨
   your-mcp-server --help
   ```

3. **éªŒè¯å·¥å…·å¯ç”¨æ€§**
   ```bash
   > /tools
   # æŸ¥çœ‹æ‰€æœ‰å¯ç”¨å·¥å…·ï¼ŒåŒ…æ‹¬ MCP æä¾›çš„
   ```

## æ€§èƒ½ä¸èµ„æºé—®é¢˜

### å“åº”ç¼“æ…¢

#### 1. æ¨¡å‹å“åº”æ…¢

**è‡ªåŠ¨å¤„ç†ï¼š**
- OAuth ç”¨æˆ·æ£€æµ‹åˆ°æ…¢å“åº”ä¼šè‡ªåŠ¨åˆ‡æ¢åˆ° Flash æ¨¡å‹

**æ‰‹åŠ¨ä¼˜åŒ–ï¼š**
```bash
# ä½¿ç”¨æ›´å¿«çš„æ¨¡å‹
> /model gemini-2.0-flash-exp-0111

# æˆ–å¯åŠ¨æ—¶æŒ‡å®š
GEMINI_MODEL="gemini-2.0-flash-exp-0111" gemini
```

#### 2. ä¸Šä¸‹æ–‡è¿‡å¤§

**ç—‡çŠ¶ï¼š**
- å“åº”æ—¶é—´æ˜¾è‘—å¢åŠ 
- å¯èƒ½å‡ºç°ä¸Šä¸‹æ–‡é•¿åº¦é”™è¯¯

**è§£å†³æ–¹æ¡ˆï¼š**
```bash
# å‹ç¼©å†å²è®°å½•
> /compress

# æ¸…é™¤ä¸å¿…è¦çš„æ¶ˆæ¯
> /clear
```

### å†…å­˜ä½¿ç”¨

#### 1. æŸ¥çœ‹å†…å­˜ç»Ÿè®¡

```bash
> /stats
```

æ˜¾ç¤ºï¼š
- ä¼šè¯ token ä½¿ç”¨æƒ…å†µ
- å·¥å…·è°ƒç”¨ç»Ÿè®¡
- å†…å­˜æ–‡ä»¶åŠ è½½æƒ…å†µ

#### 2. å†…å­˜ä¼˜åŒ–æŠ€å·§

**GEMINI.md æ–‡ä»¶ç®¡ç†ï¼š**
- ä¿æŒæ–‡ä»¶ç®€æ´ï¼Œé¿å…å†—ä½™ä¿¡æ¯
- ä½¿ç”¨åˆ†å±‚ç»“æ„ï¼ˆé¡¹ç›®çº§ > ç›®å½•çº§ï¼‰
- å®šæœŸæ¸…ç†è¿‡æ—¶å†…å®¹

**æ£€æŸ¥ç‚¹ç®¡ç†ï¼š**
```bash
# åˆ—å‡ºæ‰€æœ‰æ£€æŸ¥ç‚¹
ls .gemini/checkpoint-*.json

# åˆ é™¤æ—§æ£€æŸ¥ç‚¹
rm .gemini/checkpoint-old-*.json
```

### å¤§æ–‡ä»¶å¤„ç†

#### 1. æ–‡ä»¶å¤§å°é™åˆ¶

- å•ä¸ªæ–‡ä»¶è¯»å–é™åˆ¶ï¼šé»˜è®¤ 2000 è¡Œ
- å¯ä»¥åˆ†æ‰¹è¯»å–ï¼š
  ```
  Read file.txt from line 2000 to 4000
  ```

#### 2. æœç´¢ä¼˜åŒ–

å¯¹äºå¤§å‹ä»£ç åº“ï¼š
```bash
# ä½¿ç”¨ glob è€Œä¸æ˜¯é€’å½’æœç´¢
> Search for "*.ts" files in src/

# ä½¿ç”¨ grep çš„ç±»å‹è¿‡æ»¤
> Search for "function" in TypeScript files
```

## è°ƒè¯•æŠ€å·§

### æ—¥å¿—çº§åˆ«æ§åˆ¶

#### 1. æ§åˆ¶å°æ—¥å¿—

```javascript
// æ—¥å¿—ä¼˜å…ˆçº§
console.debug()  // ä»…åœ¨ DEBUG æ¨¡å¼æ˜¾ç¤º
console.warn()   // è­¦å‘Šï¼ˆå¦‚ 429 é”™è¯¯ï¼‰
console.error()  // é”™è¯¯ï¼ˆå¦‚ 5xx é”™è¯¯ï¼‰
```

#### 2. è¯¦ç»†é”™è¯¯æŠ¥å‘Š

é”™è¯¯æŠ¥å‘Šä½ç½®ï¼š
- macOS/Linux: `/tmp/gemini-client-error-*.json`
- Windows: `%TEMP%\gemini-client-error-*.json`

æŠ¥å‘Šå†…å®¹ï¼š
```json
{
  "error": {
    "message": "é”™è¯¯ä¿¡æ¯",
    "stack": "è°ƒç”¨æ ˆ"
  },
  "context": {
    // è¯·æ±‚ä¸Šä¸‹æ–‡
  }
}
```

### VSCode é›†æˆè°ƒè¯•

#### 1. å¯ç”¨ Node.js è°ƒè¯•

```bash
# ä½¿ç”¨è°ƒè¯•æ¨¡å¼å¯åŠ¨
DEBUG=true DEBUG_PORT=9229 gemini
```

#### 2. VSCode è°ƒè¯•é…ç½®

`.vscode/launch.json`:
```json
{
  "version": "0.2.0",
  "configurations": [
    {
      "type": "node",
      "request": "attach",
      "name": "Attach to Gemini CLI",
      "port": 9229,
      "skipFiles": ["<node_internals>/**"]
    }
  ]
}
```

### å¸¸ç”¨è¯Šæ–­å‘½ä»¤

```bash
# æŸ¥çœ‹å½“å‰é…ç½®
> /auth          # è®¤è¯çŠ¶æ€
> /model         # å½“å‰æ¨¡å‹
> /stats         # ä½¿ç”¨ç»Ÿè®¡
> /tools         # å¯ç”¨å·¥å…·
> /mcp           # MCP æœåŠ¡å™¨çŠ¶æ€

# å†…å­˜å’Œå†å²
> /memory show   # æ˜¾ç¤ºåŠ è½½çš„å†…å­˜æ–‡ä»¶
> /compress      # å‹ç¼©å¯¹è¯å†å²
```

### é—®é¢˜éš”ç¦»æŠ€å·§

1. **æœ€å°å¤ç°æ¡ˆä¾‹**
   - åˆ›å»ºæ–°çš„ç©ºç›®å½•æµ‹è¯•
   - é€æ­¥æ·»åŠ é…ç½®ç›´åˆ°é—®é¢˜å‡ºç°

2. **ç¯å¢ƒå˜é‡æ£€æŸ¥**
   ```bash
   env | grep GEMINI
   env | grep GOOGLE
   ```

3. **é…ç½®æ–‡ä»¶éªŒè¯**
   ```bash
   # éªŒè¯ JSON æ ¼å¼
   jq . ~/.config/gemini/settings.json
   ```

## é”™è¯¯æ¢å¤æœºåˆ¶

### æ£€æŸ¥ç‚¹ä¸æ¢å¤

#### 1. è‡ªåŠ¨æ£€æŸ¥ç‚¹

å¯ç”¨æ£€æŸ¥ç‚¹åŠŸèƒ½ï¼š
```json
// settings.json
{
  "checkpointing": true
}
```

æ£€æŸ¥ç‚¹ä¿å­˜ä½ç½®ï¼š`.gemini/checkpoints/`

#### 2. æ¢å¤å·¥å…·è°ƒç”¨

```bash
# åˆ—å‡ºå¯æ¢å¤çš„æ£€æŸ¥ç‚¹
> /restore

# æ¢å¤ç‰¹å®šæ£€æŸ¥ç‚¹
> /restore checkpoint-name
```

æ¢å¤å†…å®¹åŒ…æ‹¬ï¼š
- å¯¹è¯å†å²
- å®¢æˆ·ç«¯å†å²
- é¡¹ç›®æ–‡ä»¶çŠ¶æ€ï¼ˆå¦‚æœå¯ç”¨äº† Git å¿«ç…§ï¼‰

### ä¼šè¯æ¢å¤

#### 1. æ„å¤–é€€å‡ºåæ¢å¤

ä¼šè¯æ—¥å¿—è‡ªåŠ¨ä¿å­˜åœ¨ `.gemini/logs.json`

```bash
# æŸ¥çœ‹æœ€è¿‘çš„ä¼šè¯
cat .gemini/logs.json | jq '.[-10:]'
```

#### 2. æ‰‹åŠ¨ä¿å­˜ä¼šè¯çŠ¶æ€

```bash
# ä¿å­˜å½“å‰å¯¹è¯åˆ°æ£€æŸ¥ç‚¹
> Save this conversation

# ç¨åæ¢å¤
> /restore saved-conversation
```

### é”™è¯¯åçš„æ¸…ç†

#### 1. æ¸…ç†ä¸´æ—¶æ–‡ä»¶

```bash
# æ¸…ç†é”™è¯¯æŠ¥å‘Š
rm /tmp/gemini-client-error-*.json

# æ¸…ç†æŸåçš„æ—¥å¿—
rm .gemini/logs.json.*.bak
```

#### 2. é‡ç½®é…ç½®

```bash
# å¤‡ä»½å½“å‰é…ç½®
cp ~/.config/gemini/settings.json ~/.config/gemini/settings.json.bak

# é‡ç½®ä¸ºé»˜è®¤é…ç½®
rm ~/.config/gemini/settings.json
```

### ç´§æ€¥æ¢å¤æ­¥éª¤

å¦‚æœ Gemini CLI å®Œå…¨æ— æ³•å¯åŠ¨ï¼š

1. **æ¸…ç†ç¼“å­˜å’Œæ—¥å¿—**
   ```bash
   rm -rf .gemini/
   rm -rf ~/.config/gemini/cache/
   ```

2. **æ£€æŸ¥ç¯å¢ƒå˜é‡å†²çª**
   ```bash
   unset GEMINI_MODEL
   unset GEMINI_API_KEY
   ```

3. **ä½¿ç”¨æœ€å°é…ç½®å¯åŠ¨**
   ```bash
   gemini --no-config
   ```

## å¸¸è§é”™è¯¯é€ŸæŸ¥è¡¨

| é”™è¯¯ä¿¡æ¯ | å¯èƒ½åŸå›  | å¿«é€Ÿè§£å†³æ–¹æ¡ˆ |
|---------|---------|-------------|
| `GEMINI_API_KEY environment variable not found` | æœªè®¾ç½® API Key | `export GEMINI_API_KEY="your-key"` |
| `Quota exceeded for quota metric` | é…é¢ç”¨å°½ | ç­‰å¾…é‡ç½®æˆ–åˆ‡æ¢æ¨¡å‹/è®¤è¯æ–¹å¼ |
| `403 Forbidden` | é¡¹ç›®æœªå¯ç”¨æœåŠ¡ | è®¿é—®è®¾ç½®é¡µé¢å¯ç”¨ Gemini Code Assist |
| `401 Unauthorized` | è®¤è¯è¿‡æœŸ | è¿è¡Œ `/auth` é‡æ–°è®¤è¯ |
| `429 Too Many Requests` | è¯·æ±‚è¿‡å¿« | è‡ªåŠ¨é‡è¯•ï¼Œæˆ–æ‰‹åŠ¨ç­‰å¾… |
| `ENOENT: no such file` | æ–‡ä»¶ä¸å­˜åœ¨ | æ£€æŸ¥æ–‡ä»¶è·¯å¾„æ˜¯å¦æ­£ç¡® |
| `EACCES: permission denied` | æƒé™ä¸è¶³ | æ£€æŸ¥æ–‡ä»¶æƒé™ |
| `Command cannot be empty` | Shell å‘½ä»¤ä¸ºç©º | æä¾›æœ‰æ•ˆå‘½ä»¤ |
| `Directory cannot be absolute` | ä½¿ç”¨äº†ç»å¯¹è·¯å¾„ | æ”¹ç”¨ç›¸å¯¹è·¯å¾„ |
| `The content to be replaced was not found` | ç¼–è¾‘å†…å®¹ä¸åŒ¹é… | é‡æ–°è¯»å–æ–‡ä»¶ï¼Œç¡®ä¿åŒ¹é… |
| `Context length exceeded` | ä¸Šä¸‹æ–‡è¿‡é•¿ | ä½¿ç”¨ `/compress` æˆ– `/clear` |
| `Failed to start MCP server` | MCP æœåŠ¡å™¨é”™è¯¯ | æ£€æŸ¥æœåŠ¡å™¨é…ç½®å’Œæƒé™ |
| `Network timeout` | ç½‘ç»œè¿æ¥é—®é¢˜ | æ£€æŸ¥ç½‘ç»œå’Œä»£ç†è®¾ç½® |

## è·å–å¸®åŠ©

### å®˜æ–¹èµ„æº

1. **GitHub Issues**: https://github.com/google-gemini/gemini-cli/issues
2. **æ–‡æ¡£ç«™ç‚¹**: https://docs.anthropic.com/en/docs/gemini-cli
3. **ç¤¾åŒºè®ºå›**: æŸ¥çœ‹é¡¹ç›® README ä¸­çš„é“¾æ¥

### æŠ¥å‘Šé—®é¢˜æ—¶åŒ…å«

1. **é”™è¯¯ä¿¡æ¯**: å®Œæ•´çš„é”™è¯¯è¾“å‡º
2. **ç¯å¢ƒä¿¡æ¯**: 
   ```bash
   gemini --version
   node --version
   echo $GEMINI_MODEL
   ```
3. **é‡ç°æ­¥éª¤**: æœ€å°å¯é‡ç°ç¤ºä¾‹
4. **é”™è¯¯æŠ¥å‘Šæ–‡ä»¶**: `/tmp/gemini-client-error-*.json` çš„å†…å®¹

### ç¤¾åŒºæ”¯æŒ

- æœç´¢å·²æœ‰ issues çœ‹æ˜¯å¦æœ‰ç±»ä¼¼é—®é¢˜
- æä¾›æ¸…æ™°çš„é—®é¢˜æè¿°å’Œä¸Šä¸‹æ–‡
- å¦‚æœæ‰¾åˆ°è§£å†³æ–¹æ¡ˆï¼Œåˆ†äº«ç»™å…¶ä»–ç”¨æˆ·

---

**æç¤º**: å¤§å¤šæ•°é—®é¢˜å¯ä»¥é€šè¿‡æ£€æŸ¥é…ç½®ã€é‡æ–°è®¤è¯æˆ–æ¸…ç†ç¼“å­˜è§£å†³ã€‚é‡åˆ°æŒç»­æ€§é—®é¢˜æ—¶ï¼Œå¯ç”¨è°ƒè¯•æ¨¡å¼æ”¶é›†æ›´å¤šä¿¡æ¯ã€‚